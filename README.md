# proberelay

A simple program that relays WiFi probe requests collected on a monitor mode
interface to another host over UDP.

## Usage

`proberelay IFACE HOST PORT [FILTER]`

The network interface must be in monitor mode.

## Features

* Packets flagged as having bad frame check sequence are dropped.
* Optimized capture filter using fixed offsets generated at run time.
* Root is dropped.

## Packet Format

Each UDP payload can be treated as the contents of a pcap file containing
a single packet.

## Motivation

Amazonâ€™s [Dash Buttons](https://en.wikipedia.org/wiki/Amazon_Dash) have been
discontinued and the official tools to set them up no longer work. Despite
that, they can be useful for home automation if
[hacked](https://blog.christophermullins.com/2019/12/20/rescue-your-amazon-dash-buttons/).

These devices seem to use the least amount of power per activation if they are
not allowed to connect to WiFi at all, but this complicates detecting them.

This program is intended to be run on wireless routers and/or access points,
where it will forward probe requests generated by devices like the buttons on
for further processing.

## Help

This software has been released with the hope that it may be useful. Please
feel free to file bug reports, but issues requesting new features or support
will likely be closed without response.

## TODO

* See about using PF_PACKET sockets directly rather than libpcap.
* Automatically set snaplen based on PMTU.

## WONTFIX

* Support for platforms other than Linux.


## Author

[Ryan Castellucci](https://rya.nc) [@ryancdotorg](https://rya.nc/github)

## License

This tool uses the
[three clause BSD license](https://opensource.org/license/bsd-3-clause/).
Other licenses may be available by request. As a courtesy, please contact the
author if you use this in a product.
